# confirmed payment received

############################
# setup bots
bots:
  - meta: { baseFilename: bot01.yml }
    state: brandnew


############################
# receive notifications from xchain
xchainNotifications:
  # receive a payment
  - meta: { baseFilename: mempool_BTC_RECEIVE_PAYMENT_notification_01.yml }
  # receive a confirmed payment
  - meta: { baseFilename: confirmed_BTC_RECEIVE_PAYMENT_notification_01.yml }
    blockId: 300001



############################
# validate the expected results
expectedXChainCalls:
  - 
    meta: { baseFilename: send_BTC_FROM_PAYMENT_ADDRESS.yml }


expectedBotEvents:
  - 
    meta: { baseFilename: payment.unconfirmed.yml }
  - 
    meta: { baseFilename: payment.confirmed.yml }
  - 
    meta: { baseFilename: payment.moveFuelCreated.yml }
  - 
    meta: { baseFilename: payment.creationFeePaid.yml }
  - 
    meta: { baseFilename: bot.stateChange-lowfuel.yml }
  - 
    meta: { baseFilename: bot.stateChange-active.yml }


expectedBotLedgerEntries:
  - 
    meta: { baseFilename: bot_ledger_entry_model_01.yml }
  - 
    meta: { baseFilename: bot_ledger_entry_model_FUEL_DEBIT.yml }
